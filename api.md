# **礼遇圈接口文档**

> * 版本号 v0.0.1
> * 最后更新时间 2018/2/7
> * 更新人 yichen

## 更新记录

### v0.0.1

* 更新人：yichen
* 2018/6/5
* 更新内容

> 简历初稿


## 目录
<span id="m"> </span>

[TOC]


## 1 接口说明
### 1.1 接口访问地址
https://io.shanren.group/app/
### 1.2 接口签名
apikey
```java
Android端：m0BKP^I^2NGH5y$kP3Ks38kN26VaGH%Z
IOS端：%sX4H91PzuB7V^T4uefDnsiwzHDxOgrX
小程序：mRrBzm9OiRCq&^frt7c#V$b3pQQLemRv
```
### 1.3 接口访问示例
参数：userId:1 ,name:abc;
则Android端sign的值为：
MD5(name=abc&time=1507544919000&userId=1&key= YXgqgMk@RiPFxXi64hrRoA1JPd32wvz!4)
最后访问：
https://io.shanren.group/
app/demoget/v1?sign= 24C9167E2E8E018749D0B984917AA71F&userId=1&name=abc&time=1507544919000

### 1.4 接口响应 [↑](#m)

```javascript
{
    errCode: 0,
    msg: "错误信息",
    data: { },
    time:1589437847788
}
```

| 字段名称        | 字段类型       | 是否必传 | 描述  |
| ------------- |:--------:|:---------:|:--------:|
| errCode | Int | 是 | 错误码 |
| msg | String | 否 | 错误信息 |
| data | Object | 否 | 成功返回数据集 |
| time | Long | 是 | 接口返回时服务器的时间戳 |

### 1.5 接口错误码表

| 错误码        | 错误描述       |
| ------------- |:-------------:|
| 0             | 请求操作成功 |
| 1             | 请求操作失败 |
| 4             | 缺少参数 |
| 5 | 签名错误 |
| 1002 | 需要登录 |
| 1003 | 权限拒绝 |
| 1004 | 第三方登录时需要绑定手机号不绑定的话不能登录 |
| 1005 | 用户不存在 |
| 1006 | 短信验证码错误 |
| 1007 | 手机号已注册 |
| 1008 | appId 不存在 |
| 1009 | 无效的refresh_token |
| 1012 | 用户已加入其它未开始活动的战队 |

http 常用错误码

| 错误码        | 错误描述       |
| ------------- |:-------------:|
| 400 | 错误请求  服务器不理解请求的语法 |
| 401 | 未授权 需填写正确的access_token |
| 404 | （未找到） 服务器找不到请求的网页 |
| 405 | （方法禁用） 禁用请求中指定的方法 |
| 500 | 服务器内部错误，具体查看msg输出的内容 |



## 2.用户信息

### 2.1 登录

- 请求地址：noauth/user/wxLogin
- 服务协议：HTTP/POST
- 是否需要身份认证：否
- 作者：linqin

| 参数名称 | 参数类型 | 是否必传 | 默认值 | 参数说明 |
| :------: | :------: | :------: | :----: | :------: |
|   code   |  string  |    是    |   无   | 微信授权 |



### 2.2 第三方账号绑定手机号

- 请求地址：noauth/user/bindPhone
- 服务协议：HTTP/POST
- 是否需要身份认证：否
- 作者：linqin

| 参数名称 | 参数类型 | 是否必传 | 默认值 |             参数说明              |
| :------: | :------: | :------: | :----: | :-------------------------------: |
|  phone   |  String  |    是    |   无   |               电话                |
|   type   |   int    |    是    |   1    | 账号类型， 1-微信app,2-微信小程序 |
|   key    |  String  |    是    |   无   |          缓存openId的key          |

